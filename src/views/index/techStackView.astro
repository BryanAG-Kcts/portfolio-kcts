---
import { getCollection } from 'astro:content'
import TechCards from '@/components/techStack/techCards.astro'
import {
  myBackend,
  myFrontend,
  myLearning,
  myTools
} from '@/constants/techStack'
import type { Languages } from '@/interfaces/i18n'
import SectionLayout from '@/layout/sectionLayout.astro'
import WidthLayout from '@/layout/widthLayout.astro'

interface Props {
  lang: Languages
}

const { lang } = Astro.props
const [tech] = await getCollection('techStack', ({ slug }) => slug === lang)
---

<WidthLayout size="sm">
  <SectionLayout title={tech.body} sub={tech.data.sub}>
    <section id="tech-stack" class="grid grid-cols-1 gap-7 sm:grid-cols-2">
      <div class="flex flex-col items-center gap-4">
        <h3 class="text-2xl font-bold font-[Poppins]">{tech.data.frontend}</h3>

        <TechCards
          technologies={myFrontend}
          skillLevel={tech.data.skillLevel}
          textLevel={tech.data.skillLevelText}
        />
      </div>

      <div class="flex flex-col items-center gap-4">
        <h3 class="text-2xl font-bold font-[Poppins]">{tech.data.backend}</h3>

        <TechCards
          technologies={myBackend}
          skillLevel={tech.data.skillLevel}
          textLevel={tech.data.skillLevelText}
        />
      </div>

      <div class="flex flex-col items-center gap-4">
        <h3 class="text-2xl font-bold font-[Poppins]">{tech.data.learning}</h3>

        <TechCards
          technologies={myLearning}
          skillLevel={tech.data.skillLevel}
          textLevel={tech.data.skillLevelText}
        />
      </div>

      <div class="flex flex-col items-center gap-4">
        <h3 class="text-2xl font-bold font-[Poppins]">{tech.data.tools}</h3>

        <TechCards
          technologies={myTools}
          skillLevel={tech.data.skillLevel}
          textLevel={tech.data.skillLevelText}
        />
      </div>
    </section>
  </SectionLayout>
</WidthLayout>

<script>
  import { yScrollFadeIn } from '@/constants/animation/scrollFadeIn'
  yScrollFadeIn('.tech-stack-card', 0.5)
</script>
